group 'com.dlvr'
version '0.1'

apply plugin: 'java'
apply plugin: 'maven-publish'
apply plugin: 'jacoco'


sourceCompatibility = 1.8

repositories {
    mavenLocal()
    mavenCentral()
}

buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
    }
}

dependencies {

    // DLVR Common
    compile 'com.dlvr.common:dlvr-common-lib:1.+'

    // RocksDB
    compile 'org.rocksdb:rocksdbjni:4.1.0'
    // https://github.com/facebook/rocksdb/issues/871

    testCompile group: 'junit', name: 'junit', version: '4+'
}

task install(dependsOn: ['clean', 'jar', 'test', 'jacocoTestReport', 'publishToMavenLocal'])


publishing {
    publications {
        api(MavenPublication) {
            groupId group
            artifactId 'continuum'
            version version
            from components.java
        }
    }
}

jacoco {
    toolVersion = "0.7.1.201405082137"
    reportsDir = file("$buildDir/coverage")
}

jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination "${buildDir}/coverage.html"
    }
}

